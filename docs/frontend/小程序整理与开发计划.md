# 黑科易购小程序整理与开发计划

## 项目现状分析

### 技术栈
- **后端**: Spring Boot 2.7.14 + MyBatis Plus + MySQL + Redis
- **前端**: Vue 3 + Element Plus（管理后台）+ **微信小程序**（待实现）
- **安全**: Spring Security + JWT

### 核心功能模块
✅ **已具备（管理后台）**：
- 用户管理（用户列表、等级管理、地址管理）
- 商品管理（商品列表、分类、品牌、添加、编辑）
- 商家管理（商家仪表板、订单、商品、设置、促销）
- 订单管理（订单列表、详情、退款）
- 财务管理（收入、支出、数据分析）
- 跑腿服务（跑腿员管理、订单、设置、统计）
- 外卖服务（菜单、购物车、结算、订单）
- 营销管理（优惠券、横幅）
- 系统管理（管理员、角色、菜单、日志）
- 校园管理（校园信息、站点、外卖柜、楼栋）

❌ **待实现（微信小程序）**：
- 用户端小程序界面
- 小程序API接口
- 小程序用户体验优化

## 小程序功能规划

### 1. 首页模块 🏠
- **轮播图**: 校园活动、促销信息
- **快捷入口**: 跑腿、外卖、商品商城、校园服务
- **推荐商品**: 根据用户偏好推荐
- **公告通知**: 校园公告、平台通知

### 2. 用户中心 👤
- **个人信息**: 头像、昵称、学号认证
- **订单管理**: 我的订单（全部、商品、跑腿、外卖）
- **我的钱包**: 余额、充值、消费记录
- **地址管理**: 收货地址编辑
- **我的收藏**: 收藏的商品和商家

### 3. 商品商城 🛒
- **商品分类**: 按分类浏览（零食饮料、日用百货、文具书籍等）
- **商品搜索**: 关键词搜索、筛选排序
- **商品详情**: 商品图片、价格、规格、评价
- **购物车**: 添加商品、修改数量、结算

### 4. 跑腿服务 🚚
- **服务类型**:
  - 取快递：输入取件码、选择快递公司
  - 代购：指定商品、购买地点、悬赏金额
  - 代办：交材料、打印文件等服务
- **订单管理**: 发布需求、查看进度、确认完成

### 5. 外卖服务 🍔
- **商家列表**: 按距离、评分、销量排序
- **商家详情**: 菜单、评价、配送信息
- **购物车**: 跨商家购物车管理
- **配送方式**:
  - 外卖柜配送：选择外卖柜位置
  - 特殊地点配送：自定义配送位置
  - 送到寝室：输入楼栋和房间号
- **订单追踪**: 实时查看外卖配送状态

### 6. 校园服务 🏫
- **空教室查询**: 实时查看空闲教室
- **校园公告**: 官方通知、活动信息
- **二手市场**: 买卖二手商品

## 开发计划时间表

### 第一阶段：基础框架搭建（1周）

#### 1.1 项目结构创建
```bash
heikeji-miniprogram/
├── pages/              # 小程序页面
├── components/         # 小程序组件
├── utils/             # 工具函数
├── api/               # API接口封装
├── assets/            # 静态资源
├── styles/            # 样式文件
└── config/            # 配置文件
```

#### 1.2 基础配置
- 小程序App.json配置
- 全局样式配置
- 工具类封装（请求、缓存、日期处理）
- API接口封装

#### 1.3 用户系统
- 微信登录授权
- 学号绑定验证
- JWT token管理

### 第二阶段：核心功能开发（2-3周）

#### 2.1 首页与用户中心（3天）
- 首页布局实现
- 用户登录页面
- 个人中心页面
- 订单管理页面

#### 2.2 商品商城功能（5天）
- 商品分类页面
- 商品列表页面
- 商品详情页面
- 购物车功能
- 订单结算页面

#### 2.3 跑腿服务（5天）
- 跑腿需求发布页面
- 跑腿员接单页面
- 订单进度追踪
- 完成确认流程

#### 2.4 外卖服务（5天）
- 商家列表页面
- 商家详情页面
- 外卖购物车
- 配送方式选择
- 外卖订单追踪

### 第三阶段：增强功能（1周）

#### 3.1 校园服务
- 空教室查询
- 校园公告
- 二手市场

#### 3.2 营销功能
- 优惠券领取使用
- 积分系统
- 评价系统

#### 3.3 通知系统
- 订单状态推送
- 消息通知
- 系统消息

### 第四阶段：优化测试（1周）

#### 4.1 性能优化
- 页面加载优化
- 图片懒加载
- 缓存策略优化

#### 4.2 用户体验
- 交互优化
- 动画效果
- 错误处理

#### 4.3 功能测试
- 端到端测试
- 性能测试
- 兼容性测试

## 技术实现方案

### 1. 小程序技术选型
- **框架**: 原生微信小程序 / uni-app
- **UI组件**: WeUI / Vant Weapp
- **状态管理**: 小程序原生状态管理
- **网络请求**: wx.request 封装
- **数据存储**: 小程序本地存储 + 服务器存储

### 2. API接口设计
基于现有的Spring Boot后端，为小程序开发专门的API接口：

```javascript
// API 基础配置
const API_BASE_URL = 'https://your-domain.com/api/miniprogram';

// 核心接口模块
export const userAPI = {
  login: '/auth/login',
  profile: '/user/profile',
  orders: '/user/orders'
};

export const productAPI = {
  categories: '/product/categories',
  list: '/product/list',
  detail: '/product/detail'
};

export const takeawayAPI = {
  merchants: '/takeout/merchants',
  menu: '/takeout/menu',
  order: '/takeout/order'
};

export const errandAPI = {
  request: '/errand/request',
  list: '/errand/list',
  accept: '/errand/accept'
};
```

### 3. 页面结构设计

#### 3.1 首页 (pages/index)
```
index/
├── index.wxml      # 页面结构
├── index.wxss      # 页面样式  
├── index.js        # 页面逻辑
└── index.json      # 页面配置
```

#### 3.2 商品相关页面
```
product/
├── list/           # 商品列表
├── detail/         # 商品详情
└── cart/          # 购物车
```

#### 3.3 外卖相关页面
```
takeout/
├── merchants/      # 商家列表
├── merchant/       # 商家详情
├── order/          # 下单页面
└── track/          # 订单追踪
```

#### 3.4 跑腿相关页面
```
errand/
├── request/        # 发布需求
├── list/          # 需求列表
└── progress/      # 进度追踪
```

### 4. 组件设计

#### 4.1 通用组件
```
components/
├── ProductCard/    # 商品卡片
├── OrderCard/      # 订单卡片
├── AddressPicker/  # 地址选择器
├── PriceDisplay/   # 价格显示
└── StatusTag/      # 状态标签
```

#### 4.2 业务组件
```
components/
├── MerchantCard/   # 商家卡片
├── DeliveryMethod/ # 配送方式选择
├── ErrandRequest/  # 跑腿需求表单
└── OrderProgress/  # 订单进度
```

## 开发优先级

### 高优先级 🔥
1. **用户登录系统** - 所有功能的基础
2. **外卖服务** - 核心盈利功能
3. **商品商城** - 基础购物功能
4. **订单管理** - 用户体验关键

### 中优先级 ⭐
1. **跑腿服务** - 差异化竞争优势
2. **支付系统** - 交易闭环
3. **消息通知** - 用户粘性
4. **评价系统** - 质量保障

### 低优先级 📋
1. **校园服务** - 增值服务
2. **营销活动** - 推广功能
3. **数据分析** - 后台功能

## 风险评估与应对

### 技术风险
- **API兼容性**: 确保小程序API与后端兼容
- **性能优化**: 小程序包大小限制，需要合理分包
- **数据同步**: 实时性要求较高的功能需要优化

### 业务风险
- **用户习惯**: 需要教育用户使用新平台
- **商家合作**: 需要与校园商家建立合作关系
- **配送体系**: 需要建立可靠的配送网络

## 成功指标

### 技术指标
- 小程序包大小 < 2MB
- 页面加载时间 < 3秒
- 接口响应时间 < 1秒
- 崩溃率 < 0.1%

### 业务指标
- 用户注册转化率 > 80%
- 下单成功率 > 95%
- 用户满意度 > 4.5星
- 日活用户 > 1000人

## 下一步行动

1. **立即开始**: 创建小程序项目结构
2. **3天内**: 完成用户登录和基础框架
3. **1周内**: 完成外卖服务核心功能
4. **2周内**: 完成商品商城功能
5. **1个月内**: 完成所有核心功能开发

这个计划将确保小程序能够快速上线并为用户提供完整的服务体验。