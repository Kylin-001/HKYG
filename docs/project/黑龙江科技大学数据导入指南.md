# 黑龙江科技大学数据导入指南

## 1. 数据导入概述

本文档详细描述了黑龙江科技大学数据导入到黑科易购项目的流程、方法和注意事项。数据导入是项目初始化的重要环节，包括学生数据、课程数据、教师数据等核心数据的导入。

## 2. 数据准备

### 2.1 数据格式要求

- **文件格式**：CSV或Excel格式
- **编码格式**：UTF-8
- **字段分隔符**：CSV文件使用逗号(,)分隔
- **行分隔符**：使用Unix风格的换行符(\n)
- **表头要求**：必须包含与数据库表字段对应的表头

### 2.2 数据内容要求

- **学生数据**：学号、姓名、性别、年级、专业、班级、手机号、邮箱等
- **课程数据**：课程编号、课程名称、学分、学时、教师姓名、上课时间、上课地点等
- **教师数据**：教师编号、姓名、性别、职称、手机号、邮箱等
- **班级数据**：班级编号、班级名称、年级、专业、班主任等

## 3. 数据导入流程

### 3.1 数据清洗

1. **去重**：去除重复的数据记录
2. **格式统一**：统一数据格式，如日期格式、手机号格式等
3. **缺失值处理**：处理缺失的数据字段
4. **合法性验证**：验证数据的合法性，如学号格式、手机号格式等

### 3.2 数据导入前准备

1. **创建数据库和表**
   ```bash
   # 创建数据库
   mysql -u root -p
   CREATE DATABASE heikeji_mall DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   
   # 导入表结构
   mysql -u root -p heikeji_mall < sql/schema.sql
   ```

2. **配置数据库连接**
   ```bash
   # 修改application.yml配置文件
   spring:
     datasource:
       url: jdbc:mysql://localhost:3306/heikeji_mall?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai
       username: root
       password: root123
   ```

### 3.3 数据导入方法

#### 3.3.1 使用MySQL命令导入

```bash
# 导入CSV文件
mysql -u root -p --local-infile heikeji_mall
LOAD DATA LOCAL INFILE '/path/to/student.csv' INTO TABLE student
FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n' IGNORE 1 ROWS;
```

#### 3.3.2 使用Navicat导入

1. 打开Navicat，连接到MySQL数据库
2. 选择要导入数据的表
3. 点击"导入向导"按钮
4. 选择要导入的文件格式（CSV或Excel）
5. 选择要导入的文件
6. 配置导入选项，如字段映射、编码格式等
7. 点击"开始"按钮，执行导入

#### 3.3.3 使用Java程序导入

1. 编写Java程序，使用JDBC或MyBatis导入数据
2. 示例代码：
   ```java
   // 使用MyBatis批量插入数据
   List<Student> students = readStudentsFromFile("/path/to/student.csv");
   studentMapper.batchInsert(students);
   ```

### 3.4 数据导入后验证

1. **数量验证**：检查导入的数据数量是否与源数据一致
2. **完整性验证**：检查数据的完整性，是否有缺失字段
3. **合法性验证**：检查数据的合法性，是否有格式错误
4. **一致性验证**：检查关联数据的一致性，如学生与班级的关联

## 4. 注意事项

### 4.1 数据安全

- **备份数据**：在导入数据前，先备份数据库
- **权限控制**：使用具有适当权限的用户进行数据导入
- **加密传输**：如果数据通过网络传输，使用加密方式

### 4.2 性能优化

- **批量导入**：使用批量插入方式，提高导入速度
- **关闭索引**：在导入大量数据前，关闭表的索引，导入完成后重新创建
- **关闭自动提交**：在导入数据时，关闭自动提交，导入完成后手动提交

### 4.3 错误处理

- **日志记录**：记录导入过程中的错误信息
- **错误重试**：对导入失败的数据进行重试
- **错误数据处理**：将导入失败的数据单独保存，进行分析和修复

## 5. 常见问题及解决方案

### 5.1 导入速度慢

**解决方案**：
- 使用批量插入
- 关闭索引
- 关闭自动提交
- 增加MySQL的缓冲区大小

### 5.2 导入失败

**解决方案**：
- 检查数据格式是否正确
- 检查数据库连接是否正常
- 检查数据库表结构是否与数据匹配
- 检查数据库权限是否足够

### 5.3 数据重复

**解决方案**：
- 在导入前去重
- 在数据库表中设置唯一约束
- 使用INSERT IGNORE或REPLACE INTO语句

## 6. 数据导入工具

### 6.1 MySQL命令行工具

- **LOAD DATA INFILE**：MySQL内置的批量导入命令
- **mysqlimport**：MySQL提供的导入工具

### 6.2 图形化工具

- **Navicat**：功能强大的数据库管理工具，支持多种数据导入格式
- **MySQL Workbench**：MySQL官方提供的图形化管理工具
- **DBeaver**：开源的数据库管理工具，支持多种数据库

### 6.3 编程工具

- **Java**：使用JDBC或MyBatis导入数据
- **Python**：使用pandas、sqlalchemy等库导入数据
- **Shell**：使用shell脚本结合MySQL命令导入数据

## 7. 数据导入示例

### 7.1 学生数据导入示例

**CSV文件格式**：
```
学号,姓名,性别,年级,专业,班级,手机号,邮箱
20200001,张三,男,2020,计算机科学与技术,计科1班,13800138001,zhangsan@example.com
20200002,李四,女,2020,软件工程,软工1班,13800138002,lisi@example.com
20200003,王五,男,2020,网络工程,网工1班,13800138003,wangwu@example.com
```

**导入命令**：
```bash
mysql -u root -p --local-infile heikeji_mall
LOAD DATA LOCAL INFILE '/path/to/student.csv' INTO TABLE student
FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n' IGNORE 1 ROWS;
```

### 7.2 课程数据导入示例

**Excel文件格式**：
| 课程编号 | 课程名称 | 学分 | 学时 | 教师姓名 | 上课时间 | 上课地点 |
|---------|---------|------|------|---------|---------|---------|
| CS101 | 计算机基础 | 3 | 48 | 赵老师 | 周一1-2节 | 教学楼A101 |
| CS102 | 程序设计 | 4 | 64 | 钱老师 | 周二3-4节 | 教学楼A102 |
| CS103 | 数据结构 | 4 | 64 | 孙老师 | 周三5-6节 | 教学楼A103 |

**导入方法**：使用Navicat导入向导导入Excel文件

## 8. 总结

数据导入是黑科易购项目初始化的重要环节，需要仔细准备和执行。本文档详细描述了数据导入的流程、方法和注意事项，包括数据准备、数据导入流程、数据导入方法、注意事项、常见问题及解决方案、数据导入工具和数据导入示例等内容。通过遵循本文档的指导，可以确保数据导入的准确性、完整性和安全性，为项目的正常运行奠定基础。