# 黑科易购校园服务平台 - 前端开发最佳实践与规范

## 一、代码规范

### 1.1 JavaScript/TypeScript 代码规范

#### 1.1.1 命名规范
- **变量命名**：使用小驼峰命名法，如 `userName`, `totalAmount`
- **常量命名**：使用大驼峰命名法，如 `MaxCount`, `DefaultTimeout`
- **函数命名**：使用小驼峰命名法，如 `getUserInfo()`, `updateOrderStatus()`
- **类/构造函数**：使用大驼峰命名法，如 `UserService`, `OrderManager`
- **私有属性/方法**：使用下划线前缀，如 `_privateMethod()`

#### 1.1.2 代码风格
- **缩进**：使用2个空格进行缩进
- **分号**：语句结束必须使用分号
- **引号**：字符串使用单引号，如 `'hello world'`
- **大括号**：左大括号与语句在同一行，如 `if (condition) {`
- **行长度**：单行代码不超过100个字符
- **空行**：在逻辑块之间使用一个空行

#### 1.1.3 注释规范
- **文件头部**：包含文件描述、作者、创建日期等信息
- **函数注释**：使用JSDoc格式，包含参数、返回值和说明
- **复杂逻辑**：在复杂逻辑前添加解释性注释
- **TODO注释**：使用 `// TODO: 待办事项` 格式标记待办任务

### 1.2 Vue 组件规范

#### 1.2.1 组件命名
- **组件名称**：使用大驼峰命名法，如 `UserProfile.vue`, `OrderList.vue`
- **组件注册名**：使用短横线分隔，如 `user-profile`, `order-list`
- **props命名**：使用小驼峰命名法，如 `userId`, `showDetail`
- **事件命名**：使用短横线分隔，如 `update-data`, `delete-item`

#### 1.2.2 组件结构
```vue
<template>
  <!-- 组件模板 -->
</template>

<script>
export default {
  name: 'ComponentName',
  components: {
    // 子组件
  },
  props: {
    // 属性定义
  },
  data() {
    return {
      // 数据
    }
  },
  computed: {
    // 计算属性
  },
  watch: {
    // 监听器
  },
  created() {
    // 生命周期钩子
  },
  mounted() {
    // 生命周期钩子
  },
  methods: {
    // 方法
  }
}
</script>

<style scoped>
/* 组件样式 */
</style>
```

#### 1.2.3 模板规范
- 使用Vue 2.x的模板语法
- 避免在模板中使用复杂表达式
- 使用 `v-for` 时必须添加 `key` 属性
- 优先使用 `v-if` 和 `v-show` 的适当场景

### 1.3 CSS/SCSS 规范

#### 1.3.1 命名规范
- 使用BEM命名法：`block__element--modifier`
- 避免使用ID选择器
- 类名使用小写字母，单词之间用短横线分隔

#### 1.3.2 样式结构
```scss
// 组件样式
.component-name {
  // 基础样式
  
  // 元素样式
  &__header {
    // 样式
  }
  
  &__content {
    // 样式
    
    // 修饰符
    &--active {
      // 样式
    }
  }
}
```

#### 1.3.3 最佳实践
- 优先使用 `scoped` 样式隔离组件
- 避免使用 `!important`
- 合理使用CSS变量管理主题
- 优先使用Flexbox和Grid布局

## 二、组件开发标准

### 2.1 组件设计原则

#### 2.1.1 单一职责原则
- 每个组件只负责一个功能
- 避免过度复杂的组件

#### 2.1.2 可复用性原则
- 组件接口设计应通用化
- 避免硬编码业务逻辑
- 提供合理的默认值

#### 2.1.3 可维护性原则
- 组件结构清晰
- 注释完整
- 易于扩展

### 2.2 组件分类与组织

#### 2.2.1 组件分类
- **基础组件**：不包含业务逻辑的纯UI组件
- **业务组件**：包含特定业务逻辑的组件
- **页面组件**：作为路由页面的组件

#### 2.2.2 目录结构
```
components/
├── base/          // 基础组件
│   ├── Button/    // 按钮组件
│   ├── Table/     // 表格组件
│   └── Form/      // 表单组件
├── business/      // 业务组件
│   ├── OrderCard/ // 订单卡片
│   └── UserInfo/  // 用户信息
└── layout/        // 布局组件
    ├── Header/    // 头部
    └── Sidebar/   // 侧边栏
```

### 2.3 组件通信规范

#### 2.3.1 父子组件通信
- 父组件通过 `props` 传递数据给子组件
- 子组件通过 `$emit` 触发事件通知父组件

#### 2.3.2 跨层级组件通信
- 使用Vuex进行状态管理
- 使用 `provide/inject` 进行依赖注入

#### 2.3.3 非关系组件通信
- 使用事件总线或Vuex

## 三、性能优化指南

### 3.1 代码优化

#### 3.1.1 减少重渲染
- 合理使用 `v-once`, `v-memo` 指令
- 优化 `computed` 和 `watch`
- 避免在模板中使用复杂表达式

#### 3.1.2 异步加载
- 路由懒加载：`component: () => import('./components/AsyncComponent.vue')`
- 组件懒加载：`const AsyncComponent = () => import('./AsyncComponent.vue')`

#### 3.1.3 资源优化
- 图片压缩和懒加载
- 按需引入第三方库
- 减少不必要的依赖

### 3.2 网络优化

#### 3.2.1 请求优化
- 使用Axios拦截器统一处理请求
- 合理设置请求超时和重试策略
- 实现请求缓存和防抖节流

#### 3.2.2 响应数据处理
- 只获取必要的数据字段
- 分页加载大数据量
- 实现数据预加载

### 3.3 构建优化

#### 3.3.1 Webpack配置优化
- 合理设置打包入口和出口
- 优化loader配置
- 使用Tree Shaking移除未使用代码

#### 3.3.2 代码分割
- 按路由分割代码
- 按组件分割代码
- 提取公共依赖

## 四、工程化实践

### 4.1 开发工具配置

#### 4.1.1 ESLint配置
- 遵循Vue官方推荐的ESLint规则
- 配置适合团队的自定义规则
- 集成到编辑器中实时检查

#### 4.1.2 Prettier配置
- 统一代码格式化风格
- 与ESLint配合使用
- 配置自动格式化钩子

### 4.2 测试规范

#### 4.2.1 测试类型
- 单元测试：测试组件和函数
- 集成测试：测试组件间交互
- E2E测试：测试完整用户流程

#### 4.2.2 测试覆盖率
- 核心组件覆盖率 > 80%
- 工具函数覆盖率 > 90%
- 业务逻辑覆盖率 > 70%

### 4.3 Git工作流

#### 4.3.1 分支管理
- `master`：主分支，稳定版本
- `develop`：开发分支，集成功能
- `feature/xxx`：新功能分支
- `bugfix/xxx`：Bug修复分支
- `release/xxx`：发布分支

#### 4.3.2 Commit规范
使用Angular提交信息规范：
```
<type>(<scope>): <subject>

<body>

<footer>
```

**类型说明**：
- `feat`：新功能
- `fix`：Bug修复
- `docs`：文档更新
- `style`：代码风格修改
- `refactor`：代码重构
- `test`：测试相关
- `chore`：构建过程或辅助工具变动

## 五、开发流程规范

### 5.1 需求开发流程
1. **需求分析**：理解需求，拆分任务
2. **技术方案设计**：制定技术实现方案
3. **开发实现**：按照规范开发代码
4. **自测验证**：开发完成后进行自测
5. **代码审查**：提交代码进行团队审查
6. **测试验证**：通过测试环境验证
7. **发布上线**：部署到生产环境

### 5.2 代码审查标准
- 代码符合项目规范
- 功能实现完整
- 性能考虑充分
- 测试用例完善
- 文档齐全

### 5.3 问题修复流程
1. **问题定位**：复现和分析问题
2. **修复方案**：制定修复计划
3. **代码修改**：实施修复
4. **回归测试**：验证修复效果
5. **发布上线**：部署修复版本

## 六、文档规范

### 6.1 组件文档
- 组件功能说明
- Props, Events, Slots说明
- 使用示例
- 注意事项

### 6.2 API接口文档
- 接口功能说明
- 请求参数说明
- 响应数据结构
- 错误码说明
- 调用示例

### 6.3 开发文档
- 项目结构说明
- 技术栈介绍
- 开发环境配置
- 常见问题处理

## 七、安全规范

### 7.1 XSS防护
- 避免直接操作DOM
- 使用Vue的模板语法自动转义
- 对用户输入进行验证和清洗

### 7.2 CSRF防护
- 使用token验证
- 合理设置请求头
- 验证请求来源

### 7.3 数据安全
- 敏感数据加密存储
- 避免在前端存储敏感信息
- 接口请求使用HTTPS

---

本规范将根据项目进展和技术发展持续更新，团队成员应严格遵守，共同维护代码质量和项目健康发展。