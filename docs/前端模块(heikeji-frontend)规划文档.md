# 黑科易购前端模块(heikeji-frontend)规划文档

## 1. 前端模块概述

黑科易购前端模块是为黑龙江科技大学定制的校园服务平台的前端界面，包括管理后台系统。本规划基于Vue.js技术栈，旨在打造一个现代化、高性能、用户友好的校园服务前端系统，满足黑科大师生的日常服务需求。

## 2. 技术栈升级

### 2.1 核心技术升级

| 技术 | 旧版本 | 新版本 | 升级理由 |
|------|--------|--------|----------|
| Vue | 2.7.16 | 3.5.x | 更好的性能、Composition API、更好的TypeScript支持 |
| Vuex | 3.6.2 | Pinia | 更现代化的状态管理、更简单的API、更好的TypeScript支持 |
| Vue Router | 3.6.5 | 4.x | 与Vue 3兼容，支持组合式API |
| Element UI | 2.15.14 | Element Plus | 支持Vue 3，更现代化的UI组件 |
| Webpack | 4.x | Vite | 更快的开发体验和构建速度 |
| JavaScript | ES6+ | TypeScript | 类型安全，更好的代码提示和维护性 |

### 2.2 新增技术栈

- **Vitest**: 替代Jest，更快的测试框架
- **ESLint 8.x**: 更好的代码质量检查
- **Prettier 3.x**: 代码格式化
- **Playwright**: 端到端测试
- **Tailwind CSS**: 原子化CSS框架，提升开发效率
- **Axios 1.x**: 更现代的HTTP客户端
- **VueUse**: Vue 3实用工具集合
- **Pinia Persistedstate**: 状态持久化

## 3. 目录结构优化

```
heikeji-frontend/
├── public/                    # 静态资源
│   ├── favicon.ico           # 网站图标
│   └── images/               # 图片资源
├── src/                      # 源代码
│   ├── api/                  # API接口
│   │   ├── campus/          # 校园服务API
│   │   ├── user/            # 用户服务API
│   │   ├── product/         # 商品服务API
│   │   ├── order/           # 订单服务API
│   │   ├── takeout/         # 外卖服务API
│   │   ├── delivery/        # 配送服务API
│   │   └── payment/         # 支付服务API
│   ├── assets/              # 项目资源
│   │   ├── icons/           # 图标
│   │   ├── images/          # 图片
│   │   └── styles/          # 全局样式
│   ├── components/          # 公共组件
│   │   ├── base/            # 基础组件
│   │   ├── business/        # 业务组件
│   │   └── campus/          # 校园特色组件
│   ├── composables/         # 组合式函数
│   │   ├── useUser/         # 用户相关hooks
│   │   ├── useCampus/       # 校园服务hooks
│   │   └── useOrder/        # 订单相关hooks
│   ├── config/              # 配置文件
│   │   ├── api.js           # API配置
│   │   ├── campus.js        # 校园配置
│   │   └── theme.js         # 主题配置
│   ├── layouts/             # 布局组件
│   │   ├── AdminLayout.vue  # 管理后台布局
│   │   └── UserLayout.vue   # 用户界面布局
│   ├── plugins/             # 插件
│   │   ├── element.js       # Element Plus配置
│   │   ├── axios.js         # Axios配置
│   │   └── pinia.js         # Pinia配置
│   ├── router/              # 路由配置
│   │   ├── admin.js         # 管理后台路由
│   │   ├── campus.js        # 校园服务路由
│   │   └── index.js         # 主路由配置
│   ├── stores/              # Pinia状态管理
│   │   ├── user.js          # 用户状态
│   │   ├── cart.js          # 购物车状态
│   │   ├── campus.js        # 校园服务状态
│   │   └── settings.js      # 系统设置状态
│   ├── utils/               # 工具函数
│   │   ├── request.js       # 请求工具
│   │   ├── campus.js        # 校园工具函数
│   │   └── auth.js          # 认证工具
│   ├── views/               # 页面视图
│   │   ├── admin/           # 管理后台页面
│   │   ├── user/            # 用户中心页面
│   │   ├── product/         # 商品相关页面
│   │   ├── order/           # 订单相关页面
│   │   ├── takeout/         # 外卖相关页面
│   │   ├── delivery/        # 配送相关页面
│   │   └── campus/          # 校园特色页面
│   ├── App.vue              # 根组件
│   └── main.js              # 入口文件
├── tests/                   # 测试文件
│   ├── unit/                # 单元测试
│   └── e2e/                 # 端到端测试
├── .eslintrc.js             # ESLint配置
├── .prettierrc              # Prettier配置
├── index.html               # HTML入口
├── package.json             # 项目配置
├── tsconfig.json            # TypeScript配置
└── vite.config.js           # Vite配置
```

## 4. 校园特色页面规划

### 4.1 校园首页(campus/index.vue)
- 校园服务导航
- 黑科大新闻公告
- 校园活动推荐
- 天气提醒（针对哈尔滨气候特点）
- 校园地图入口

### 4.2 校园地图(campus/map.vue)
- 黑科大校园平面图
- 建筑导航功能
- 服务点标记（食堂、快递点、超市等）
- 路径规划功能

### 4.3 食堂外卖(campus/canteen.vue)
- 黑科大各食堂展示
- 档口分类导航
- 菜品推荐和搜索
- 错峰用餐提醒
- 保温配送选项

### 4.4 快递服务(campus/express.vue)
- 快递查询
- 代取服务下单
- 快递柜状态查询
- 快递点导航

### 4.5 校园社区(campus/community.vue)
- 二手市场
- 失物招领
- 校园活动发布
- 兴趣小组

### 4.6 校园服务(campus/services.vue)
- 图书馆服务
- 体育馆预约
- 打印复印服务
- 报修服务

## 5. 功能模块详细设计

### 5.1 用户认证模块
- **统一身份认证**: 支持黑科大统一身份认证系统登录
- **多角色登录**: 学生、教职工、商家、配送员等角色登录
- **记住登录状态**: 本地存储登录凭证
- **权限控制**: 基于角色的访问控制

### 5.2 商品商城模块
- **商品分类**: 校园特色商品分类
- **商品搜索**: 关键词搜索、筛选、排序
- **商品详情**: 图片、描述、评价等
- **购物车**: 商品添加、删除、修改数量
- **结算功能**: 多种支付方式集成

### 5.3 外卖服务模块
- **食堂选择**: 展示黑科大各食堂
- **菜单浏览**: 按档口分类浏览菜品
- **菜品详情**: 图片、价格、描述、评价
- **订单管理**: 订单状态跟踪、评价功能
- **配送地址管理**: 支持校园特色地址保存

### 5.4 配送服务模块
- **代取下单**: 填写快递信息、取件地址、代取要求
- **配送员选择**: 查看附近配送员信息
- **订单跟踪**: 实时查看配送状态
- **评价功能**: 对配送服务进行评价

### 5.5 支付服务模块
- **多种支付方式**: 微信支付、校园卡支付等
- **支付记录**: 查看历史支付记录
- **退款申请**: 在线申请退款
- **账单查询**: 详细的消费账单

### 5.6 校园服务模块
- **校园信息发布**: 学校公告、活动信息
- **资源查询**: 图书馆、体育馆等资源查询
- **服务预约**: 预约各种校园服务
- **常见问题**: 校园服务FAQ

## 6. 组件设计

### 6.1 基础组件
- **CampusHeader**: 校园特色头部组件
- **CampusFooter**: 校园特色底部组件
- **CampusCard**: 校园风格卡片组件
- **CampusButton**: 校园风格按钮组件
- **CampusDialog**: 校园风格对话框组件

### 6.2 业务组件
- **DormitorySelector**: 宿舍选择器
- **CanteenSelector**: 食堂选择器
- **ExpressInput**: 快递信息输入组件
- **CampusMapMarker**: 校园地图标记组件
- **CampusActivityCard**: 校园活动卡片组件

### 6.3 表单组件
- **CampusForm**: 校园风格表单组件
- **CampusInput**: 校园风格输入框
- **CampusSelect**: 校园风格选择器
- **CampusDatePicker**: 校园风格日期选择器
- **CampusUpload**: 校园风格文件上传组件

## 7. 性能优化策略

### 7.1 代码优化
- **组件懒加载**: 使用Vue Router的动态导入功能
- **图片优化**: 使用WebP格式，按需加载
- **代码分割**: 按路由和功能模块分割代码
- **Tree Shaking**: 移除未使用的代码

### 7.2 用户体验优化
- **骨架屏**: 页面加载时显示骨架屏
- **虚拟滚动**: 长列表使用虚拟滚动
- **防抖节流**: 优化用户输入和滚动体验
- **离线缓存**: 关键资源使用Service Worker缓存

### 7.3 构建优化
- **Vite构建**: 利用Vite的快速构建能力
- **按需引入**: Element Plus组件按需引入
- **CSS优化**: 提取公共样式，优化CSS体积
- **静态资源CDN**: 大型静态资源使用CDN加速

## 8. 响应式设计

### 8.1 适配策略
- **移动端优先**: 优先设计移动端界面
- **断点设计**: 
  - 移动端: < 768px
  - 平板: 768px - 1024px
  - 桌面端: > 1024px

### 8.2 布局适配
- **Flexbox布局**: 使用弹性布局适配不同屏幕
- **Grid布局**: 复杂页面使用网格布局
- **响应式字体**: 使用相对单位设置字体大小
- **响应式图片**: 根据屏幕大小加载不同尺寸图片

## 9. 开发规范

### 9.1 代码规范
- **ESLint规则**: 遵循标准JS代码规范
- **TypeScript类型**: 严格使用TypeScript类型定义
- **命名规范**: 
  - 组件名: PascalCase
  - 变量名: camelCase
  - 常量名: UPPER_CASE
  - 文件命名: 组件使用PascalCase，其他使用kebab-case

### 9.2 组件开发规范
- **组件拆分**: 合理拆分组件，保持组件单一职责
- **Props设计**: 明确定义Props类型和默认值
- **事件处理**: 使用emits明确声明组件事件
- **样式隔离**: 使用scoped样式或CSS Modules

### 9.3 提交规范
- **Git提交信息**: 遵循Angular提交规范
  - feat: 新功能
  - fix: 修复bug
  - docs: 文档更新
  - style: 代码格式
  - refactor: 代码重构
  - test: 测试相关
  - chore: 构建过程或辅助工具变动

## 10. 部署策略

### 10.1 构建配置
- **开发环境**: 启用开发服务器和热更新
- **测试环境**: 构建优化版本，用于测试
- **生产环境**: 构建压缩版本，用于部署

### 10.2 部署方式
- **静态文件服务器**: Nginx部署静态文件
- **容器化部署**: 使用Docker容器化
- **CI/CD集成**: 自动构建和部署流程

### 10.3 性能监控
- **前端监控**: 集成Sentry错误监控
- **性能分析**: 使用Lighthouse进行性能分析
- **用户行为分析**: 集成数据统计工具

## 11. 实施计划

### 11.1 第一阶段: 技术栈升级 (2周)
- 搭建Vue 3 + Vite项目基础架构
- 配置TypeScript和ESLint
- 集成Element Plus和Pinia

### 11.2 第二阶段: 核心功能开发 (4周)
- 用户认证模块
- 商品商城模块
- 订单管理模块
- 支付服务模块

### 11.3 第三阶段: 校园特色功能开发 (6周)
- 食堂外卖功能
- 快递代取服务
- 校园社区功能
- 校园地图服务

### 11.4 第四阶段: 优化和测试 (3周)
- 性能优化
- 兼容性测试
- 用户体验优化
- 安全测试

### 11.5 第五阶段: 部署和上线 (1周)
- 生产环境部署
- 监控配置
- 灰度发布
- 正式上线

## 12. 风险评估

### 12.1 技术风险
- **兼容性问题**: 确保Vue 3兼容所有目标浏览器
- **性能挑战**: 处理大量数据和复杂交互时的性能问题
- **学习成本**: 团队适应新技术栈的时间成本

### 12.2 业务风险
- **需求变更**: 校园服务需求可能发生变化
- **集成难度**: 与校园现有系统集成的复杂性
- **用户接受度**: 新系统的用户接受程度

### 12.3 应对策略
- **技术预研**: 提前进行技术可行性研究
- **敏捷开发**: 采用敏捷方法，快速响应需求变更
- **用户测试**: 提前进行用户测试，收集反馈
- **培训计划**: 为团队和用户提供必要的培训

---

本规划文档详细描述了黑科易购前端模块的技术升级、功能设计和实施计划，旨在打造一个符合黑龙江科技大学特色的校园服务平台前端系统。通过采用现代化的技术栈和合理的架构设计，确保系统的性能、可维护性和用户体验达到最佳水平。