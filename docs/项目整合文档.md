# 黑科易购校园服务平台 - 项目整合文档

> **你的时间很宝贵，跑腿的事交给我们。**

## 1. 项目概述

黑科易购校园服务平台是专为黑龙江科技大学学生打造的校园综合性服务平台，整合购物、外卖、跑腿、信息服务等功能，让学生足不出户即可解决生活、学习所需。

### 1.1 项目定位

- **目标用户**：黑龙江科技大学全体学生
- **核心价值**：节省时间，提高效率，一站式解决校园生活需求
- **项目Slogan**：你的时间很宝贵，跑腿的事交给我们

### 1.2 项目愿景

成为黑龙江科技大学最受欢迎的校园服务平台，提供便捷、高效、安全的校园生活服务，让学生专注于学习和成长。

## 2. 技术栈

### 2.1 后端技术栈

| 类别 | 技术 | 版本 | 用途 |
|------|------|------|------|
| 核心框架 | Spring Boot | 2.7.x | 应用基础框架 |
| 微服务 | Spring Cloud | 2021.x | 微服务框架 |
| 服务注册发现 | Nacos | 2.0.x | 服务注册与配置中心 |
| API网关 | Spring Cloud Gateway | 3.x | 统一入口、路由转发 |
| 服务调用 | OpenFeign | 3.x | 声明式服务调用 |
| ORM框架 | MyBatis-Plus | 3.5.x | 数据库访问增强 |
| 安全框架 | Spring Security + JWT | - | 认证授权 |
| 数据库 | MySQL | 8.0+ | 关系型数据库 |
| 缓存 | Redis | 5.0+ | 缓存、会话存储 |
| 消息队列 | RabbitMQ | 3.8.x | 异步消息处理 |
| 工具类 | Hutool | 5.8.20 | 通用工具类库 |
| 文档 | SpringDoc OpenAPI | 2.x | API文档生成 |

### 2.2 前端技术栈

| 类别 | 技术 | 版本 | 用途 |
|------|------|------|------|
| 管理后台 | Vue.js | 3.x | 前端开发框架 |
| UI组件库 | Element Plus | 2.x | UI组件 |
| 微信小程序 | 原生微信小程序 | - | 移动端应用 |
| 状态管理 | Vuex | 4.x | 全局状态管理 |
| 路由 | Vue Router | 4.x | 前端路由 |
| HTTP客户端 | Axios | 0.27.x | HTTP请求 |
| 构建工具 | Vite | 3.x | 快速构建工具 |

## 3. 项目架构

### 3.1 整体架构

项目采用经典的微服务架构，分为前端层、API网关层、服务层、数据访问层和基础设施层。

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                               前端层                                         │
│  ┌───────────────┐    ┌───────────────┐    ┌──────────────────────────────┐  │
│  │  管理后台 (Vue)│    │  PC门户 (Vue) │    │  移动端 (H5/小程序/App)        │  │
│  └───────────────┘    └───────────────┘    └──────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
                                     │
┌─────────────────────────────────────────────────────────────────────────────┐
│                               API网关层                                      │
│                      ┌──────────────────────────────┐                        │
│                      │  Spring Cloud Gateway        │                        │
│                      │  (路由、限流、认证、熔断)      │                        │
│                      └──────────────────────────────┘                        │
└─────────────────────────────────────────────────────────────────────────────┘
                                     │
┌─────────────────────────────────────────────────────────────────────────────┐
│                               服务层                                         │
│  ┌──────────────┐  ┌─────────────┐  ┌──────────────┐  ┌───────────────────┐  │
│  │ 用户服务      │  │ 商品服务     │  │ 订单服务     │  │ 支付服务          │  │
│  └──────────────┘  └─────────────┘  └──────────────┘  └───────────────────┘  │
│                                                                             │
│  ┌──────────────┐  ┌─────────────┐  ┌──────────────┐  ┌───────────────────┐  │
│  │ 外卖服务      │  │ 跑腿服务     │  │ 校园服务     │  │ 二手市场服务       │  │
│  └──────────────┘  └─────────────┘  └──────────────┘  └───────────────────┘  │
│                                                                             │
│  ┌──────────────┐  ┌─────────────┐                                          │
│  │ 失物招领服务  │  │ 系统服务     │                                          │
│  └──────────────┘  └─────────────┘                                          │
└─────────────────────────────────────────────────────────────────────────────┘
                                     │
┌─────────────────────────────────────────────────────────────────────────────┐
│                           数据访问与共享层                                    │
│  ┌──────────────┐  ┌─────────────┐  ┌──────────────┐  ┌───────────────────┐  │
│  │ MySQL集群    │  │ Redis缓存    │  │ ElasticSearch│  │ 消息队列 (RabbitMQ) │  │
│  └──────────────┘  └─────────────┘  └──────────────┘  └───────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
                                     │
┌─────────────────────────────────────────────────────────────────────────────┐
│                           基础设施与运维层                                    │
│  ┌──────────────┐  ┌─────────────┐  ┌──────────────┐  ┌───────────────────┐  │
│  │ Docker容器化 │  │ Kubernetes  │  │ CI/CD流水线   │  │ 监控告警系统       │  │
│  └──────────────┘  └─────────────┘  └──────────────┘  └───────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.2 模块划分

| 模块名称 | 主要职责 | 关键服务 |
|----------|----------|----------|
| heikeji-common | 通用工具类、常量、异常定义 | common-core, common-security |
| heikeji-system | 系统管理（用户、角色、权限） | 角色管理、权限分配 |
| heikeji-gateway | API网关、路由转发、限流 | 路由管理、限流配置 |
| heikeji-mall-api | API接口定义 | 接口规范、DTO定义 |
| heikeji-mall-service | 核心业务服务 |
| ├── service-user | 用户服务 | 微信登录、用户管理 |
| ├── service-product | 商品服务 | 商品管理、库存管理 |
| ├── service-order | 订单服务 | 订单管理、订单状态流转 |
| ├── service-takeout | 外卖服务 | 外卖订单、外卖柜管理 |
| ├── service-delivery | 跑腿服务 | 配送需求、跑腿员管理 |
| ├── service-payment | 支付服务 | 微信支付、订单支付 |
| ├── service-campus | 校园服务 | 校园信息、空教室查询 |
| ├── service-secondhand | 二手市场 | 二手物品发布、交易 |
| └── service-lostfound | 失物招领 | 失物发布、认领 |
| heikeji-admin | 管理后台前端 | 管理员管理平台 |
| heikeji-miniprogram | 微信小程序前端 | 移动端应用 |
| service-api-docs | API文档服务 | Swagger/OpenAPI文档 |

## 4. 核心功能模块

### 4.1 用户中心

- **微信登录**：支持微信一键登录，绑定学号实名认证
- **个人信息管理**：支持昵称、头像、收货地址等信息的管理
- **我的钱包**：支持余额查询、充值、消费记录查询
- **我的订单**：统一管理所有类型的订单

### 4.2 商品商城

- **商品分类浏览**：支持零食饮料、日用百货、文具书籍等分类
- **商品搜索与排序**：支持关键词搜索和多种排序方式
- **购物车功能**：支持添加、修改、删除购物车商品
- **商家入驻与管理**：支持商家注册、商品管理

### 4.3 外卖服务

- **三种配送方式**：外卖柜配送、特殊地点配送、寝室配送
- **外卖柜管理**：支持外卖柜查询、分配和释放
- **订单实时跟踪**：支持订单状态实时更新和配送轨迹查看
- **商家管理**：支持外卖商家管理和商品管理

### 4.4 校园跑腿

- **取快递**：自动填充菜鸟驿站地址，输入取件码即可
- **代购服务**：支持指定商品和购买地点
- **代办服务**：支持交材料、打印文件等服务
- **悬赏金设置**：支持用户设置跑腿悬赏金

### 4.5 校园服务

- **空教室查询**：支持查询空闲教室信息
- **校园公告**：支持发布和查看校园公告
- **校园地图**：支持校园地图导航
- **学业辅助**：支持课程表查询、考试安排查询

### 4.6 二手市场

- **闲置物品发布**：支持发布二手物品信息
- **物品分类与搜索**：支持按类别搜索二手物品
- **交易管理**：支持在线交易和线下交易

### 4.7 失物招领

- **失物发布**：支持发布失物信息
- **招领信息管理**：支持管理招领信息
- **认领流程**：支持失物认领流程

### 4.8 支付服务

- **微信支付**：支持微信支付集成
- **订单支付**：支持各类订单的支付
- **支付回调处理**：处理支付结果回调

## 5. 快速开始

### 5.1 环境要求

- JDK 1.8+
- Maven 3.6+
- MySQL 8.0+
- Redis 5.0+
- Git

### 5.2 部署方式

#### 5.2.1 Docker Compose 部署（推荐）

```bash
# 克隆代码
git clone https://github.com/your-repo/heikeji-mall.git
cd heikeji-mall

# 配置环境变量
cp .env.example .env

# 启动服务
docker-compose up -d
```

#### 5.2.2 本地开发环境部署

```bash
# 克隆代码
git clone https://github.com/your-repo/heikeji-mall.git
cd heikeji-mall

# 初始化数据库
mysql -u root -p
CREATE DATABASE heikeji_mall DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
mysql -u root -p heikeji_mall < sql/full_db.sql

# 编译项目
mvn clean install

# 启动服务
cd heikeji-mall-service
./start_services_final.sh
```

### 5.3 访问服务

| 服务名称 | 访问地址 | 说明 |
|----------|----------|------|
| API网关 | http://localhost:8080 | 所有API请求的入口 |
| 管理后台 | http://localhost:8081 | 管理员管理平台 |
| Swagger文档 | http://localhost:8888/swagger-ui.html | API接口文档 |
| Nacos控制台 | http://localhost:8848/nacos | 服务注册与配置中心 |

## 6. 开发指南

### 6.1 代码结构

项目采用标准的Maven项目结构，每个服务模块独立开发、独立部署。

### 6.2 开发规范

- **代码规范**：遵循阿里巴巴Java开发规范
- **命名规范**：类名使用大驼峰，方法名使用小驼峰
- **注释规范**：关键代码必须添加注释
- **提交规范**：使用语义化提交信息

### 6.3 本地开发流程

1. **启动基础服务**：MySQL、Redis、Nacos
2. **启动开发服务**：使用IDE启动各业务服务
3. **调试**：使用Swagger或Postman调试API
4. **测试**：编写单元测试和集成测试
5. **提交代码**：遵循Git Flow工作流

## 7. 文档结构

### 7.1 主要文档目录

| 目录 | 内容说明 |
|------|----------|
| **docs/architecture** | 架构设计、服务拆分、技术方案等 |
| **docs/development** | 开发规范、开发计划、最佳实践等 |
| **docs/deployment** | 部署文档、环境配置、数据库导入等 |
| **docs/operation** | 运维指南、监控方案、备份恢复等 |
| **docs/test** | 测试用例、质量保障、性能测试等 |
| **docs/module** | 各功能模块详细说明 |
| **docs/api** | API接口文档、接口规范等 |
| **docs/project** | 项目计划、上线准备、总结报告等 |
| **docs/frontend** | 前端开发相关文档 |
| **docs/backend** | 后端开发相关文档 |
| **docs/database** | 数据库设计、SQL脚本等 |
| **docs/security** | 安全设计、权限管理等 |
| **docs/payment** | 支付模块相关文档 |

### 7.2 核心文档

- **项目整合文档**：docs/项目整合文档.md（当前文档）
- **快速开始指南**：docs/快速开始指南.md
- **架构文档**：docs/architecture/架构文档.md
- **开发规范**：docs/development/开发规范文档.md
- **API文档**：docs/api/API接口文档.md
- **数据库设计**：docs/database/数据库设计文档.md
- **外卖服务模块**：docs/module/外卖服务模块说明.md

## 8. 监控与运维

### 8.1 日志管理

- **集中式日志**：使用ELK Stack进行日志收集和分析
- **日志级别**：支持DEBUG、INFO、WARN、ERROR等多个级别
- **日志文件**：按服务和日期分文件存储

### 8.2 监控指标

- **服务监控**：通过Actuator端点监控服务状态
- **JVM监控**：监控JVM内存、GC等指标
- **业务监控**：核心业务指标（订单量、注册量、支付成功率等）
- **数据库监控**：MySQL慢查询、连接数等指标
- **Redis监控**：Redis内存、命中率等指标

### 8.3 告警机制

- **多渠道告警**：支持邮件、短信、企业微信等告警方式
- **告警级别**：根据严重程度设置不同的告警级别
- **告警抑制**：避免告警风暴

### 8.4 运维工具

- **Docker**：容器化部署
- **Docker Compose**：多容器管理
- **Kubernetes**：容器编排（生产环境）
- **CI/CD**：自动化构建、测试、部署

## 9. 扩展与未来规划

### 9.1 功能扩展

1. **配送员评分系统**：允许用户对配送服务进行评分
2. **智能调度算法**：根据配送员位置、订单量等因素智能分配订单
3. **优惠券功能**：支持各种类型的优惠券
4. **预订单功能**：允许用户提前下单
5. **订单评价功能**：允许用户对订单进行评价
6. **校园生活圈**：提供校园社交功能

### 9.2 技术升级

1. **Spring Boot 3.x升级**：升级到Spring Boot 3.x和Java 17
2. **微服务治理增强**：引入Sentinel进行流量控制和熔断
3. **分布式追踪**：引入SkyWalking进行分布式链路追踪
4. **容器化增强**：优化Docker镜像，提高部署效率
5. **CI/CD优化**：优化自动化构建、测试、部署流程

### 9.3 性能优化

1. **数据库优化**：分库分表、读写分离
2. **缓存优化**：多级缓存、热点数据预热
3. **API优化**：接口响应时间优化
4. **前端优化**：页面加载速度优化

## 10. 联系方式

- **项目地址**：https://github.com/your-repo/heikeji-mall
- **问题反馈**：https://github.com/your-repo/heikeji-mall/issues
- **技术支持**：contact@heikeji.com

## 11. 许可证

MIT License

---

**让校园生活更简单，让时间更宝贵！** 🎓✨
