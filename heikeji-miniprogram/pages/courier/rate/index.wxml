<!-- 快递代取评价页面 -->
<view class="container">
  <!-- 页面头部 -->
  <view class="header">
    <view class="header-left" bindtap="onBack">
      <image src="/assets/icons/back.png" class="back-icon" mode="aspectFit"></image>
    </view>
    <text class="header-title">评价任务</text>
    <view class="header-right"></view>
  </view>

  <!-- 评价内容 -->
  <view class="rating-content">
    <!-- 评分 -->
    <view class="rating-section">
      <text class="section-title">总体评分</text>
      <view class="stars-container">
        <block wx:for="{{5}}" wx:key="index">
          <image 
            src="{{index < rating ? '/assets/icons/star-active.png' : '/assets/icons/star.png'}}" 
            class="star-icon" 
            mode="aspectFit"
            data-rating="{{index + 1}}"
            bindtap="setRating"
          ></image>
        </block>
      </view>
      <text class="rating-text">{{ratingText}}</text>
    </view>

    <!-- 评价标签 -->
    <view class="tags-section">
      <text class="section-title">选择评价标签</text>
      <view class="tags-container">
        <block wx:for="{{tags}}" wx:key="id">
          <view 
            class="tag {{selectedTags.includes(item.id) ? 'tag-selected' : ''}}" 
            data-tag-id="{{item.id}}"
            bindtap="toggleTag"
          >
            {{item.name}}
          </view>
        </block>
      </view>
    </view>

    <!-- 评价内容 -->
    <view class="comment-section">
      <text class="section-title">详细评价</text>
      <textarea 
        class="comment-input" 
        placeholder="请输入您的评价内容..."
        placeholder-class="placeholder"
        maxlength="500"
        bindinput="onCommentInput"
        value="{{comment}}"
      ></textarea>
      <text class="char-count">{{comment.length}}/500</text>
    </view>

    <!-- 图片上传 -->
    <view class="images-section">
      <text class="section-title">上传图片（最多5张）</text>
      <view class="images-container">
        <block wx:for="{{images}}" wx:key="index">
          <view class="image-item">
            <image src="{{item}}" class="uploaded-image" mode="aspectFill"></image>
            <view class="delete-image" data-index="{{index}}" bindtap="deleteImage">
              <image src="/assets/icons/delete.png" class="delete-icon" mode="aspectFit"></image>
            </view>
          </view>
        </block>
        <view wx:if="{{images.length < 5}}" class="add-image" bindtap="chooseImage">
          <image src="/assets/icons/add-image.png" class="add-image-icon" mode="aspectFit"></image>
          <text class="add-image-text">添加图片</text>
        </view>
      </view>
    </view>

    <!-- 提交按钮 -->
    <view class="submit-section">
      <button class="submit-btn" bindtap="onSubmit" type="primary">{{rating === 0 ? '请先评分' : '提交评价'}}</button>
    </view>
  </view>
</view>
