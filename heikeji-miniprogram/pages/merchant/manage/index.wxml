<!-- 商家管理页面 -->
<view class="page-container">
  <!-- 页面头部 -->
  <view class="header">
    <text class="title">商家管理中心</text>
    <view class="header-right">
      <image src="/assets/icons/settings.png" class="setting-icon" mode="aspectFit"></image>
    </view>
  </view>

  <!-- 商家信息 -->
  <view class="merchant-info" bindtap="editMerchantInfo">
    <image src="{{merchantInfo.logo}}" class="merchant-logo" mode="aspectFit"></image>
    <view class="merchant-details">
      <text class="merchant-name">{{merchantInfo.name}}</text>
      <text class="merchant-type">{{merchantInfo.type === 'restaurant' ? '餐饮商家' : merchantInfo.type === 'convenience' ? '便利店' : merchantInfo.type === 'supermarket' ? '超市' : merchantInfo.type === 'specialty' ? '特色店铺' : '其他类型'}}</text>
      <text class="merchant-status approved">已审核</text>
    </view>
    <icon type="right" size="20" class="arrow-icon"></icon>
  </view>

  <!-- 统计数据 -->
  <view class="statistics">
    <view class="stat-item">
      <text class="stat-label">总订单</text>
      <text class="stat-value">{{statistics.totalOrders}}</text>
    </view>
    <view class="stat-item">
      <text class="stat-label">总商品</text>
      <text class="stat-value">{{statistics.totalProducts}}</text>
    </view>
    <view class="stat-item">
      <text class="stat-label">总销售额</text>
      <text class="stat-value">¥{{statistics.totalRevenue.toFixed(2)}}</text>
    </view>
    <view class="stat-item">
      <text class="stat-label">今日订单</text>
      <text class="stat-value">{{statistics.todayOrders}}</text>
    </view>
    <view class="stat-item">
      <text class="stat-label">今日销售额</text>
      <text class="stat-value">¥{{statistics.todayRevenue.toFixed(2)}}</text>
    </view>
  </view>

  <!-- 功能菜单 -->
  <view class="menu-section">
    <view class="menu-grid">
      <view class="menu-item" bindtap="manageProducts">
        <image src="/assets/icons/product.png" class="menu-icon" mode="aspectFit"></image>
        <text class="menu-text">商品管理</text>
      </view>
      <view class="menu-item" bindtap="viewAllOrders">
        <image src="/assets/icons/order.png" class="menu-icon" mode="aspectFit"></image>
        <text class="menu-text">订单管理</text>
      </view>
      <view class="menu-item" bindtap="viewSalesReport">
        <image src="/assets/icons/chart.png" class="menu-icon" mode="aspectFit"></image>
        <text class="menu-text">销售报表</text>
      </view>
      <view class="menu-item" bindtap="contactService">
        <image src="/assets/icons/contact.png" class="menu-icon" mode="aspectFit"></image>
        <text class="menu-text">联系客服</text>
      </view>
    </view>
  </view>

  <!-- 最近订单 -->
  <view class="order-section">
    <view class="section-header">
      <text class="section-title">最近订单</text>
      <view class="section-more" bindtap="viewAllOrders">
        <text class="more-text">查看全部</text>
        <icon type="right" size="16" class="more-icon"></icon>
      </view>
    </view>
    
    <!-- 订单列表 -->
    <view class="order-list">
      <block wx:if="{{orders.length > 0}}">
        <block wx:for="{{orders}}" wx:key="id">
          <view class="order-item" bindtap="viewOrderDetail" data-id="{{item.id}}">
            <view class="order-header">
              <text class="order-no">订单号：{{item.orderNo}}</text>
              <text class="order-status" wx:if="{{item.status === 'pending'}}">待处理</text>
              <text class="order-status processing" wx:elif="{{item.status === 'processing'}}">处理中</text>
              <text class="order-status completed" wx:else>已完成</text>
            </view>
            <view class="order-body">
              <text class="order-info">共 {{item.productCount}} 件商品</text>
              <text class="order-amount">¥{{item.totalAmount.toFixed(2)}}</text>
            </view>
            <view class="order-footer">
              <text class="order-time">{{item.createTime}}</text>
              <view class="order-actions">
                <button wx:if="{{item.status === 'pending'}}" class="action-btn primary" size="mini">处理</button>
                <button wx:elif="{{item.status === 'processing'}}" class="action-btn primary" size="mini">配送</button>
                <button wx:else class="action-btn" size="mini">查看</button>
              </view>
            </view>
          </view>
        </block>
      </block>
      <block wx:else>
        <view class="empty-order">
          <image src="/assets/icons/empty-order.png" class="empty-icon" mode="aspectFit"></image>
          <text class="empty-text">暂无订单</text>
        </view>
      </block>
    </view>
  </view>

  <!-- 加载更多 -->
  <view wx:if="{{loading}}" class="loading-more">
    <text class="loading-text">加载中...</text>
  </view>
</view>
