<!-- 积分记录页面 -->
<view class="page-container">
  <!-- 页面头部 -->
  <view class="header">
    <view class="back-btn" bindtap="onBack">
      <icon type="back" size="22"></icon>
    </view>
    <text class="title">我的积分</text>
    <view class="header-right"></view>
  </view>

  <!-- 积分余额 -->
  <view class="balance-section">
    <view class="balance-info">
      <text class="balance-title">当前积分</text>
      <text class="balance-value">{{pointBalance}}</text>
    </view>
    <view class="balance-desc">
      <text class="desc-text">积分可用于兑换商品或抵扣订单金额</text>
    </view>
  </view>

  <!-- 筛选条件 -->
  <view class="filter-container">
    <view 
      wx:for="{{filters}}" 
      wx:key="id"
      class="filter-item {{currentFilter === item.id ? 'active' : ''}}"
      data-id="{{item.id}}"
      bindtap="onFilterChange"
    >
      <text>{{item.name}}</text>
    </view>
  </view>

  <!-- 积分记录列表 -->
  <view class="records-list">
    <!-- 空状态 -->
    <view wx:if="{{isEmpty}}" class="empty-state">
      <icon type="info" size="60" color="#c8c9cc"></icon>
      <text class="empty-text">暂无积分记录</text>
    </view>
    
    <!-- 积分记录列表 -->
    <view wx:else>
      <view 
        wx:for="{{pointRecords}}" 
        wx:key="id"
        class="record-item {{item.type === 'income' ? 'income' : 'outcome'}}"
      >
        <!-- 积分来源/用途 -->
        <view class="record-left">
          <text class="record-title">{{item.source}}</text>
          <text class="record-desc">{{item.description}}</text>
          <text class="record-time">{{item.createTime}}</text>
        </view>
        
        <!-- 积分变动金额 -->
        <view class="record-right">
          <text class="record-amount {{item.type === 'income' ? 'income' : 'outcome'}}">
            {{item.type === 'income' ? '+' : '-'}}{{item.amount}}
          </text>
        </view>
      </view>
      
      <!-- 加载更多 -->
      <view wx:if="{{loading}}" class="loading-more">
        <text>加载中...</text>
      </view>
      <view wx:elif="{{!hasMore}}" class="loading-more">
        <text>没有更多记录了</text>
      </view>
    </view>
  </view>
</view>
