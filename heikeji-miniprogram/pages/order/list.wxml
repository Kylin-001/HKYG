<!-- pages/order/list.wxml -->
<view class="container">
  <!-- 页面标题 -->
  <view class="page-header">
    <text class="page-title">订单管理</text>
  </view>

  <!-- 订单状态筛选 -->
  <view class="order-tabs">
    <scroll-view scroll-x="true" enable-flex>
      <view 
        class="tab-item {{currentTab === item.id ? 'active' : ''}}" 
        wx:for="{{tabs}}" 
        wx:key="id" 
        data-id="{{item.id}}" 
        bindtap="onTabChange"
      >
        <text class="tab-text">{{item.name}}</text>
        <view class="tab-line" wx:if="{{currentTab === item.id}}"></view>
      </view>
    </scroll-view>
  </view>

  <!-- 订单列表 -->
  <view class="order-list" wx:if="{{orders.length > 0}}">
    <view 
      class="order-item" 
      wx:for="{{orders}}" 
      wx:key="orderId" 
      bindtap="onOrderTap" 
      data-id="{{item.orderId}}"
    >
      <!-- 订单头部 -->
      <view class="order-header">
        <view class="order-info">
          <text class="order-type">{{item.orderTypeText}}</text>
          <text class="order-number">订单号：{{item.orderId}}</text>
        </view>
        <text class="order-status" style="color: {{item.statusColor}}">{{item.statusText}}</text>
      </view>

      <!-- 订单时间和金额 -->
      <view class="order-meta">
        <text class="order-time">{{item.createTime}}</text>
        <text class="order-amount">总计：¥{{item.totalAmount}}</text>
      </view>

      <!-- 订单内容预览 -->
      <view class="order-preview" wx:if="{{item.items.length > 0}}">
        <image 
          class="preview-image" 
          src="{{item.items[0].image || '/assets/images/default-product.png'}}" 
          mode="aspectFill"
        ></image>
        <view class="preview-info">
          <text class="preview-name">{{item.items[0].name}}</text>
          <text class="preview-more" wx:if="{{item.items.length > 1}}">等{{item.totalItems}}件商品</text>
        </view>
      </view>

      <!-- 订单操作 -->
      <view class="order-actions">
        <button 
          wx:for="{{item.actions}}" 
          wx:key="index" 
          class="action-btn {{item.actionType}}" 
          size="mini" 
          bindtap="onActionTap" 
          data-order-id="{{item.orderId}}" 
          data-action="{{item.action}}" 
          catchtap
        >
          {{item.actionText}}
        </button>
      </view>
    </view>
  </view>

  <!-- 空订单提示 -->
  <view class="empty-orders" wx:else>
    <image class="empty-icon" src="/assets/images/empty-orders.png"></image>
    <text class="empty-text">暂无订单</text>
    <button class="go-shopping" bindtap="onGoHome">去首页</button>
  </view>
</view>