<!-- 订单列表页面 -->
<view class="container">
  <!-- 页面头部 -->
  <view class="header">
    <view class="header-left" bindtap="onBack">
      <image src="/assets/icons/back.png" class="back-icon" mode="aspectFit"></image>
    </view>
    <text class="header-title">我的订单</text>
    <view class="header-right"></view>
  </view>

  <!-- 订单状态筛选 -->
  <scroll-view class="filter-bar" scroll-x scroll-with-animation>
    <view 
      class="filter-item {{currentStatus === status.value ? 'active' : ''}}" 
      wx:for="{{statusFilter}}" 
      wx:key="value"
      data-status="{{item.value}}"
      bindtap="onStatusChange"
    >
      <text class="filter-text">{{item.label}}</text>
    </view>
  </scroll-view>

  <!-- 订单列表 -->
  <scroll-view class="order-list" scroll-y bindscrolltolower="onLoadMore">
    <!-- 订单项 -->
    <block wx:for="{{orderList}}" wx:key="id">
      <view class="order-item">
        <!-- 订单头部 -->
        <view class="order-header">
          <view class="order-info">
            <text class="order-no">订单号：{{item.orderNo}}</text>
            <text class="order-status" style="color: {{getStatusColor(item.status)}}">{{getStatusText(item.status)}}</text>
          </view>
          <text class="order-time">{{item.createTime}}</text>
        </view>
        
        <!-- 订单商品 -->
        <view class="order-goods">
          <block wx:for="{{item.items}}" wx:for-item="goods" wx:key="id">
            <view class="goods-item" bindtap="goToOrderDetail" data-id="{{item.id}}">
              <image src="{{goods.image}}" class="goods-image" mode="aspectFill"></image>
              <view class="goods-info">
                <text class="goods-name">{{goods.name}}</text>
                <text class="goods-spec" wx:if="{{goods.spec}}">{{goods.spec}}</text>
                <view class="goods-price-quantity">
                  <text class="goods-price">¥{{goods.price}}</text>
                  <text class="goods-quantity">x{{goods.quantity}}</text>
                </view>
              </view>
            </view>
          </block>
        </view>
        
        <!-- 订单底部 -->
        <view class="order-footer">
          <view class="order-total">
            <text class="total-label">共{{item.items.length}}件商品 实付：</text>
            <text class="total-amount">¥{{item.payAmount}}</text>
          </view>
          <view class="order-actions">
            <!-- 根据订单状态显示不同的操作按钮 -->
            <!-- 待支付 -->
            <block wx:if="{{item.status === 'pending'}}">
              <view class="action-btn cancel" bindtap="onCancelOrder" data-id="{{item.id}}">取消订单</view>
              <view class="action-btn primary" bindtap="onPayOrder" data-id="{{item.id}}">立即支付</view>
            </block>
            
            <!-- 待发货 -->
            <block wx:if="{{item.status === 'confirmed'}}">
              <view class="action-btn" bindtap="onRemindShip" data-id="{{item.id}}">提醒发货</view>
            </block>
            
            <!-- 待收货 -->
            <block wx:if="{{item.status === 'shipped'}}">
              <view class="action-btn" bindtap="onCheckLogistics" data-id="{{item.id}}">查看物流</view>
              <view class="action-btn primary" bindtap="onConfirmReceive" data-id="{{item.id}}">确认收货</view>
            </block>
            
            <!-- 已完成 -->
            <block wx:if="{{item.status === 'completed'}}">
              <view class="action-btn" bindtap="onEvaluate" data-id="{{item.id}}">评价</view>
              <view class="action-btn" bindtap="onBuyAgain" data-id="{{item.id}}">再次购买</view>
            </block>
            
            <!-- 已取消 -->
            <block wx:if="{{item.status === 'cancelled'}}">
              <view class="action-btn" bindtap="onDeleteOrder" data-id="{{item.id}}">删除订单</view>
            </block>
            
            <!-- 查看详情按钮 -->
            <view class="action-btn detail" bindtap="goToOrderDetail" data-id="{{item.id}}">查看详情</view>
          </view>
        </view>
      </view>
    </block>
    
    <!-- 空订单提示 -->
    <view class="empty-order" wx:if="{{orderList.length === 0}}">
      <image src="/assets/icons/empty-order.png" class="empty-icon" mode="aspectFit"></image>
      <text class="empty-text">暂无订单</text>
      <view class="go-shopping-btn" bindtap="goToShopping">去购物</view>
    </view>
    
    <!-- 加载更多 -->
    <view class="loading-more" wx:if="{{hasMore}}">
      <text class="loading-text">加载中...</text>
    </view>
    
    <!-- 没有更多数据 -->
    <view class="no-more" wx:if="{{!hasMore && orderList.length > 0}}">
      <text class="no-more-text">没有更多订单了</text>
    </view>
  </scroll-view>
</view>