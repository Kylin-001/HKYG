<!-- 图书馆首页 -->
<view class="page-container">
  <!-- 页面头部 -->
  <view class="header">
    <view class="back-btn" bindtap="onBack">
      <icon type="back" size="22"></icon>
    </view>
    <text class="title">图书馆</text>
    <view class="header-right">
      <image src="/assets/icons/more.png" class="more-icon" mode="aspectFit" bindtap="onMore"></image>
    </view>
  </view>

  <!-- 服务分类 -->
  <view class="service-categories">
    <view class="category-item" bindtap="navigateToService" data-type="book_borrow">
      <image src="/assets/icons/book-borrow.png" class="category-icon" mode="aspectFit"></image>
      <text class="category-name">图书借阅</text>
    </view>
    <view class="category-item" bindtap="navigateToService" data-type="seat_reservation">
      <image src="/assets/icons/seat-reservation.png" class="category-icon" mode="aspectFit"></image>
      <text class="category-name">座位预约</text>
    </view>
    <view class="category-item" bindtap="navigateToService" data-type="book_search">
      <image src="/assets/icons/book-search.png" class="category-icon" mode="aspectFit"></image>
      <text class="category-name">图书查询</text>
    </view>
    <view class="category-item" bindtap="navigateToService" data-type="library_info">
      <image src="/assets/icons/library-info.png" class="category-icon" mode="aspectFit"></image>
      <text class="category-name">图书馆信息</text>
    </view>
  </view>

  <!-- 最近借阅 -->
  <view class="section" wx:if="{{recentBorrows.length > 0}}">
    <view class="section-header">
      <text class="section-title">最近借阅</text>
      <text class="more" bindtap="navigateToBorrowList">查看更多</text>
    </view>
    <view class="borrow-list">
      <view class="borrow-item" wx:for="{{recentBorrows}}" wx:key="id">
        <text class="book-title">{{item.bookTitle}}</text>
        <text class="borrow-time">借阅时间：{{item.borrowTime}}</text>
        <text class="return-time">应还时间：{{item.returnTime}}</text>
      </view>
    </view>
  </view>

  <!-- 座位预约统计 -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">座位预约</text>
    </view>
    <view class="seat-stats">
      <view class="stat-item">
        <text class="stat-value">{{totalSeats}}</text>
        <text class="stat-label">总座位数</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{occupiedSeats}}</text>
        <text class="stat-label">已占用</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{availableSeats}}</text>
        <text class="stat-label">可预约</text>
      </view>
    </view>
    <button class="reserve-btn" type="primary" bindtap="navigateToSeatReservation">
      立即预约座位
    </button>
  </view>

  <!-- 图书馆公告 -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">图书馆公告</text>
      <text class="more" bindtap="navigateToLibraryAnnouncements">查看更多</text>
    </view>
    <view class="announcement-list">
      <view class="announcement-item" wx:for="{{libraryAnnouncements}}" wx:key="id" bindtap="navigateToAnnouncementDetail" data-id="{{item.id}}">
        <text class="announcement-title">{{item.title}}</text>
        <text class="announcement-time">{{item.createTime}}</text>
      </view>
    </view>
  </view>
</view>