<!-- 优惠券列表页面 -->
<view class="page-container">
  <!-- 页面头部 -->
  <view class="header">
    <view class="back-btn" bindtap="onBack">
      <icon type="back" size="22"></icon>
    </view>
    <text class="title">我的优惠券</text>
    <view class="header-right">
      <navigator url="/pages/coupon/receive/index" class="receive-btn">
        <text class="btn-text">领取优惠券</text>
      </navigator>
    </view>
  </view>

  <!-- 筛选条件 -->
  <view class="filter-container">
    <view 
      wx:for="{{filters}}" 
      wx:key="id"
      class="filter-item {{currentFilter === item.id ? 'active' : ''}}"
      data-id="{{item.id}}"
      bindtap="onFilterChange"
    >
      <text>{{item.name}}</text>
    </view>
  </view>

  <!-- 优惠券列表 -->
  <view class="coupon-list">
    <!-- 空状态 -->
    <view wx:if="{{isEmpty}}" class="empty-state">
      <icon type="info" size="60" color="#c8c9cc"></icon>
      <text class="empty-text">暂无优惠券</text>
      <navigator url="/pages/coupon/receive/index" class="empty-action">
        <text class="action-text">去领取</text>
      </navigator>
    </view>
    
    <!-- 优惠券列表 -->
    <view wx:else>
      <view 
        wx:for="{{coupons}}" 
        wx:key="id"
        class="coupon-item {{item.status === 'used' ? 'used' : item.status === 'expired' ? 'expired' : ''}}"
        data-id="{{item.id}}"
        bindtap="viewCouponDetail"
      >
        <!-- 优惠券左侧金额区域 -->
        <view class="coupon-left">
          <view class="amount-container">
            <text class="currency-symbol">¥</text>
            <text class="amount">{{item.amount}}</text>
          </view>
          <text class="amount-desc">{{item.type === 'discount' ? '折扣券' : '满减券'}}</text>
        </view>
        
        <!-- 优惠券右侧信息区域 -->
        <view class="coupon-right">
          <!-- 优惠券名称和描述 -->
          <text class="coupon-name">{{item.name}}</text>
          <text class="coupon-desc">{{item.description}}</text>
          
          <!-- 使用条件 -->
          <view class="coupon-conditions">
            <text wx:if="{{item.minAmount}}" class="condition">满{{item.minAmount}}元可用</text>
            <text wx:if="{{item.orderType}}" class="condition">{{item.orderType === 'takeout' ? '外卖' : item.orderType === 'product' ? '商品' : item.orderType === 'errand' ? '跑腿' : '全品类'}}可用</text>
          </view>
          
          <!-- 有效期 -->
          <view class="coupon-expire">
            <text class="expire-label">有效期：</text>
            <text class="expire-date">{{item.startTime}}至{{item.endTime}}</text>
          </view>
        </view>
        
        <!-- 优惠券状态标签 -->
        <view wx:if="{{item.status === 'used'}}" class="status-tag used">已使用</view>
        <view wx:elif="{{item.status === 'expired'}}" class="status-tag expired">已过期</view>
        
        <!-- 优惠券角标 -->
        <view class="coupon-corner"></view>
      </view>
      
      <!-- 加载更多 -->
      <view wx:if="{{loading}}" class="loading-more">
        <text>加载中...</text>
      </view>
      <view wx:elif="{{!hasMore}}" class="loading-more">
        <text>没有更多优惠券了</text>
      </view>
    </view>
  </view>
</view>
