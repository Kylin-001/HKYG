// 黑科易购动画系统 v2.0 - 现代化交互动画
// 与设计令牌集成，提供流畅的交互动画效果

// =========================================
// 使用设计令牌中的动画变量
// =========================================

// 从主题中获取动画配置
$animation-duration: map-get(map-get($transitions, duration), base);
$animation-easing: map-get(map-get($transitions, easing), 'cubic-bezier');

// 主题颜色变量
$primary-color: theme-color(primary);
$primary-light: theme-color(primary-light);
$primary-lightest: theme-color(primary-lightest);

// =========================================
// 页面转场动画
// =========================================

// 淡入淡出 + 变换
.fade-transform-enter-active,
.fade-transform-leave-active {
  transition: all $animation-duration $animation-easing;
}

.fade-transform-enter-from {
  opacity: 0;
  transform: translateX(30px);
}

.fade-transform-leave-to {
  opacity: 0;
  transform: translateX(-30px);
}

// 淡入淡出
.fade-enter-active,
.fade-leave-active {
  transition: opacity $animation-duration $animation-easing;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}

// 滑动
.slide-enter-active,
.slide-leave-active {
  transition: all $animation-duration $animation-easing;
  overflow: hidden;
}

.slide-enter-from {
  transform: translateY(30px);
  opacity: 0;
}

.slide-leave-to {
  transform: translateY(-30px);
  opacity: 0;
}

// 缩放
.zoom-enter-active,
.zoom-leave-active {
  transition: all $animation-duration $animation-easing;
}

.zoom-enter-from,
.zoom-leave-to {
  transform: scale(0.95);
  opacity: 0;
}

// 旋转
.rotate-enter-active,
.rotate-leave-active {
  transition: all $animation-duration $animation-easing;
  transform-origin: center;
}

.rotate-enter-from {
  transform: rotateZ(-10deg) scale(0.9);
  opacity: 0;
}

.rotate-leave-to {
  transform: rotateZ(10deg) scale(0.9);
  opacity: 0;
}

// =========================================
// 组件交互动画
// =========================================

// 悬停上浮效果
.hover-float {
  transition: all $animation-duration $animation-easing;
  transform: translateY(0);
  box-shadow: theme-color(shadow-base);
}

.hover-float:hover {
  transform: translateY(-5px);
  box-shadow: theme-color(shadow-lg);
}

// 悬停缩放效果
.hover-scale {
  transition: all $animation-duration $animation-easing;
  transform: scale(1);
  box-shadow: theme-color(shadow-base);
}

.hover-scale:hover {
  transform: scale(1.02);
  box-shadow: theme-color(shadow-lg);
}

// 悬停发光效果
.hover-glow {
  transition: all $animation-duration $animation-easing;
  box-shadow: theme-color(shadow-sm);
}

.hover-glow:hover {
  box-shadow: 0 0 15px rgba($primary-color, 0.2);
}

// 点击缩放效果
.click-scale {
  transition: transform $animation-duration / 2 $animation-easing;
}

.click-scale:active {
  transform: scale(0.98);
}

// 边框高亮效果
.hover-border-highlight {
  transition: all $animation-duration $animation-easing;
  border-color: theme-color(border-color);
}

.hover-border-highlight:hover {
  border-color: theme-color(primary);
}

// =========================================
// 加载动画
// =========================================

// 旋转加载
@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

.loading-spin {
  animation: spin 1s linear infinite;
}

// 脉冲效果
@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.loading-pulse {
  animation: pulse 1.5s ease-in-out infinite;
}

// 跳动效果
@keyframes bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

.loading-bounce {
  animation: bounce 1s ease-in-out infinite;
}

// 波浪效果
@keyframes wave {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.loading-wave {
  position: relative;
  overflow: hidden;
}

.loading-wave::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.2),
    transparent
  );
  animation: wave 1.5s ease-in-out infinite;
}

// =========================================
// 元素进入动画
// =========================================

// 从底部进入
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in-up {
  animation: fadeInUp $animation-duration $animation-easing;
}

// 从左侧进入
@keyframes fadeInLeft {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.fade-in-left {
  animation: fadeInLeft $animation-duration $animation-easing;
}

// 从右侧进入
@keyframes fadeInRight {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.fade-in-right {
  animation: fadeInRight $animation-duration $animation-easing;
}

// 从顶部进入
@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in-down {
  animation: fadeInDown $animation-duration $animation-easing;
}

// =========================================
// 列表动画
// =========================================

// 列表项进入动画
.list-item-enter-active,
.list-item-leave-active {
  transition: all $animation-duration $animation-easing;
}

.list-item-enter-from {
  opacity: 0;
  transform: translateX(30px);
}

.list-item-leave-to {
  opacity: 0;
  transform: translateX(-30px);
}

.list-item-move {
  transition: transform $animation-duration $animation-easing;
}

// 交错动画延迟
.stagger-100 > * {
  animation-delay: 0.1s;
}

.stagger-200 > * {
  animation-delay: 0.2s;
}

.stagger-300 > * {
  animation-delay: 0.3s;
}

// =========================================
// 滚动动画
// =========================================

// 滚动时淡入
.scroll-fade-in {
  opacity: 0;
  transform: translateY(30px);
  transition: all 0.6s map-get(map-get($transitions, easing), 'cubic-bezier');
}

.scroll-fade-in.visible {
  opacity: 1;
  transform: translateY(0);
}

// =========================================
// 现代化微交互动画
// =========================================

// 卡片悬停效果 - 深度变换
.card-hover-depth {
  transition: all $animation-duration $animation-easing;
  box-shadow: theme-color(shadow-base);
  transform: translateY(0);
}

.card-hover-depth:hover {
  transform: translateY(-8px) scale(1.01);
  box-shadow: theme-color(shadow-xl);
}

// 按钮交互效果
.button-hover {
  transition: all $animation-duration $animation-easing;
  position: relative;
  overflow: hidden;
}

.button-hover::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.3);
  transform: translate(-50%, -50%);
  transition: width 0.6s $animation-easing, height 0.6s $animation-easing;
}

.button-hover:active::before {
  width: 300px;
  height: 300px;
}

// 表单元素聚焦动画
.form-focus {
  transition: all $animation-duration $animation-easing;
  border-color: theme-color(input-border);
  box-shadow: none;
}

.form-focus:focus {
  border-color: $primary-color;
  box-shadow: theme-color(input-focus-shadow);
  transform: translateY(-1px);
}

// 标签动画
.tag-hover {
  transition: all $animation-duration $animation-easing;
  transform: scale(1);
}

.tag-hover:hover {
  transform: scale(1.05) translateY(-2px);
  box-shadow: theme-color(shadow-md);
}

// 图标旋转动画
.icon-rotate {
  transition: transform $animation-duration $animation-easing;
}

.icon-rotate:hover {
  transform: rotate(360deg);
}

// 数字增长动画
@keyframes countUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.count-up {
  animation: countUp 1s $animation-easing;
}

// 骨架屏加载动画
@keyframes pulse {
  0%, 100% {
    background-color: theme-color(border-light);
  }
  50% {
    background-color: theme-color(border-color);
  }
}

.skeleton-pulse {
  animation: pulse 1.5s ease-in-out infinite;
}

// 波浪加载动画
@keyframes wave {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.wave-loader {
  position: relative;
  overflow: hidden;
  background: theme-color(border-light);
}

.wave-loader::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba($primary-color, 0.2),
    transparent
  );
  animation: wave 1.5s ease-in-out infinite;
}

// =========================================
// 工具类
// =========================================

// 隐藏滚动条但允许滚动
.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.no-scrollbar::-webkit-scrollbar {
  display: none;
}

// 平滑滚动
.smooth-scroll {
  scroll-behavior: smooth;
}

// 防止用户选择
.no-select {
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

// 文本截断
.text-ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// 多行文本截断
.text-ellipsis-2 {
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

.text-ellipsis-3 {
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
}

// 响应式动画控制
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
